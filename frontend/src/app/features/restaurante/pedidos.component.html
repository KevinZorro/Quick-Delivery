<!-- src/app/features/pedidos/pedidos.component.html -->

<h2 class="text-2xl font-bold mb-4 text-gray-800">Historial de pedidos</h2>

<!-- Cargando -->
<div *ngIf="cargando" class="text-gray-600 animate-pulse">
  Cargando...
</div>

<!-- Sin pedidos -->
<div
  *ngIf="!cargando && pedidos.length === 0"
  class="text-gray-500 bg-gray-100 py-3 px-4 rounded-lg border border-gray-200"
>
  No hay pedidos aún.
</div>

<!-- Lista de pedidos -->
<div
  *ngFor="let pedido of pedidos"
  class="mt-4 p-5 bg-white rounded-xl shadow-md border border-gray-200"
>

  <h4 class="text-lg font-semibold text-blue-700 mb-2">
    Pedido ID: {{ pedido.id }}
  </h4>

  <p class="text-gray-700">
    <strong class="font-medium">Total:</strong>
    {{ pedido.total | currency:'COP' }}
  </p>

  <p class="text-gray-700">
    <strong class="font-medium">Fecha:</strong>
    {{ pedido.fechaCreacion | date:'short' }}
  </p>

  <p class="text-gray-700 mb-3">
    <strong class="font-medium">Estado:</strong>
    <span
      class="px-2 py-1 rounded-md text-purple text-xs"
      [ngClass]="{
        'bg-green-600': pedido.estado === 'ENTREGADO',
        'bg-yellow-600': pedido.estado === 'EN_CAMINO',
        'bg-blue-600': pedido.estado === 'PENDIENTE',
        'bg-red-600': pedido.estado === 'CANCELADO'
      }"
    >
      {{ pedido.estado }}
    </span>
  </p>

  <!-- Items -->
  <div *ngIf="pedido.items" class="bg-gray-50 p-3 rounded-lg border border-gray-200">
    <h5 class="text-md font-semibold text-gray-800 mb-2">Items:</h5>

    <ul class="space-y-2">
      <li
        *ngFor="let item of pedido.items"
        class="bg-white border border-gray-200 p-3 rounded-lg shadow-sm text-gray-700"
      >
        <span class="font-medium">{{ item.nombre }}</span>
        — Cant: {{ item.cantidad }}
        — Subtotal: {{ item.subtotal | currency:'COP' }}
      </li>
    </ul>
  </div>

</div>
