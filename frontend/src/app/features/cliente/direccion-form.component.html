<app-header></app-header>

<div class="container mx-auto px-4 py-8 max-w-2xl">
  <h2 class="text-3xl font-bold text-gray-800 mb-6">
    {{ isEditMode ? 'Editar Dirección' : 'Nueva Dirección' }}
  </h2>

  <!-- Error -->
  <div *ngIf="errorMessage" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
    {{ errorMessage }}
  </div>

  <!-- Formulario -->
  <form [formGroup]="direccionForm" (ngSubmit)="onSubmit()" class="bg-white rounded-lg shadow-md p-6 space-y-4">
    
    <!-- Tipo de Referencia -->
    <div>
      <label class="block text-gray-700 font-semibold mb-2">Tipo de Dirección *</label>
      <select title="select" formControlName="tipoReferencia" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
        <option *ngFor="let tipo of tiposReferencia" [value]="tipo">{{ tipo }}</option>
      </select>
    </div>

    <!-- Calle -->
    <div>
      <label class="block text-gray-700 font-semibold mb-2">Calle / Dirección Principal *</label>
      <input 
        type="text" 
        formControlName="calle" 
        placeholder="Ej: Calle 45 # 23-12"
        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
      <p *ngIf="direccionForm.get('calle')?.invalid && direccionForm.get('calle')?.touched" class="text-red-500 text-sm mt-1">
        La calle es obligatoria
      </p>
    </div>

    <!-- Ciudad -->
    <div>
      <label class="block text-gray-700 font-semibold mb-2">Ciudad *</label>
      <input 
        type="text" 
        formControlName="ciudad" 
        placeholder="Ej: Bogotá"
        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
      <p *ngIf="direccionForm.get('ciudad')?.invalid && direccionForm.get('ciudad')?.touched" class="text-red-500 text-sm mt-1">
        La ciudad es obligatoria
      </p>
    </div>

    <!-- Barrio -->
    <div>
      <label class="block text-gray-700 font-semibold mb-2">Barrio *</label>
      <input 
        type="text" 
        formControlName="barrio" 
        placeholder="Ej: Chapinero"
        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
      <p *ngIf="direccionForm.get('barrio')?.invalid && direccionForm.get('barrio')?.touched" class="text-red-500 text-sm mt-1">
        El barrio es obligatorio
      </p>
    </div>

    <!-- Referencia -->
    <div>
      <label class="block text-gray-700 font-semibold mb-2">Referencia (opcional)</label>
      <textarea 
        formControlName="referencia" 
        rows="3"
        placeholder="Ej: Casa de dos pisos, portón azul"
        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"></textarea>
    </div>

    <!-- Coordenadas (opcional) -->
    <div>
      <label class="block text-gray-700 font-semibold mb-2">Coordenadas (opcional)</label>
      <input 
        type="text" 
        formControlName="coordenadas" 
        placeholder="Ej: 4.6097, -74.0817"
        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
    </div>

    <!-- Botones -->
    <div class="flex space-x-4 pt-4">
      <button 
        type="submit" 
        [disabled]="direccionForm.invalid || loading"
        class="flex-1 bg-teal-600 hover:bg-teal-700 text-white px-6 py-3 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed">
        {{ loading ? 'Guardando...' : (isEditMode ? 'Actualizar' : 'Guardar') }}
      </button>
      <button 
        type="button"
        (click)="cancelar()"
        class="flex-1 bg-gray-400 hover:bg-gray-500 text-white px-6 py-3 rounded-lg transition">
        Cancelar
      </button>
    </div>
  </form>
</div>
