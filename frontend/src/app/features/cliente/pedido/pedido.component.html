<div class="modal-overlay" (click)="cerrar()">
  <div class="modal-container" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>Confirmar Pedido</h2>
      <button class="btn-close" (click)="cerrar()">&times;</button>
    </div>

    <div class="modal-body" *ngIf="producto">
      <div class="producto-info">
        <h3>{{ producto.nombre }}</h3>
        <p class="precio-unitario">Precio: ${{ producto.precio | number:'1.2-2' }}</p>
      </div>

      <form [formGroup]="pedidoForm" (ngSubmit)="enviarPedido()">
        <div class="form-group">
          <label for="cantidad">Cantidad:</label>
          <input 
            id="cantidad" 
            type="number" 
            formControlName="cantidad" 
            min="1" 
            class="form-control"
          />
        </div>

        <div class="form-group">
          <label for="metodoPago">MÃ©todo de Pago:</label>
          <select id="metodoPago" formControlName="metodoPago" class="form-control">
            <option value="EFECTIVO">Efectivo</option>
            <option value="TARJETA">Tarjeta</option>
            <option value="TRANSFERENCIA">Transferencia</option>
          </select>
        </div>

        <div class="form-group">
          <label for="instrucciones">Instrucciones especiales:</label>
          <textarea 
            id="instrucciones" 
            formControlName="instrucciones" 
            class="form-control"
            rows="3"
            placeholder="Ej: Sin cebolla, extra queso..."
          ></textarea>
        </div>

        <div class="total-container">
          <span class="total-label">Total:</span>
          <span class="total-amount">${{ subtotal | number:'1.2-2' }}</span>
        </div>

        <div class="modal-actions">
          <button type="button" class="btn-cancel" (click)="cerrar()">
            Cancelar
          </button>
          <button 
            type="submit" 
            class="btn-confirm" 
            [disabled]="pedidoForm.invalid || isSubmitting"
          >
            <span *ngIf="!isSubmitting">Confirmar Pedido</span>
            <span *ngIf="isSubmitting">Procesando...</span>
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
